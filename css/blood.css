

/* ===== Theme Switcher ===== */
.theme-switcher {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    z-index: 100;
  }
  
  /* 改进主题切换按钮样式 */
  .theme-btn {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.4);
    border: 2px solid var(--border-color);
    color: var(--text-light);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-medium);
    backdrop-filter: blur(10px);
  }
  
  .theme-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary-gold);
  }
  
  .theme-btn.active {
    background: var(--primary-gold);
    color: var(--primary-dark);
    border-color: var(--primary-gold);
    box-shadow: var(--glow-gold);
    transform: scale(1.1);
  }
/* ===== Bloodline Selection Styles ===== */
/* Form Elements - 统一表单样式 */
.bloodline-fieldset, .gender-fieldset {
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-lg);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    background: linear-gradient(145deg, 
        rgba(26, 42, 63, 0.7), 
        rgba(10, 26, 47, 0.7)
    );
    position: relative;
    transition: all var(--transition-medium);
}

.bloodline-fieldset:hover, .gender-fieldset:hover {
    border-color: var(--border-color-hover);
}

.bloodline-fieldset legend, .gender-fieldset legend {
    font-family: var(--font-primary);
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--primary-gold);
    padding: 0 var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
}

.bloodline-selector {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
}

.bloodline-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-md);
    border-radius: var(--border-radius);
    background: linear-gradient(145deg, 
        rgba(0, 0, 0, 0.3), 
        rgba(0, 0, 0, 0.1)
    );
    border: 2px solid transparent;
    cursor: pointer;
    transition: all var(--transition-medium);
    position: relative;
    overflow: hidden;
}

.bloodline-option:hover {
    transform: var(--hover-lift);
    border-color: var(--border-color);
    background: linear-gradient(145deg, 
        rgba(0, 0, 0, 0.4), 
        rgba(0, 0, 0, 0.2)
    );
}

.bloodline-option.active {
    border-color: var(--primary-gold);
    background: linear-gradient(145deg, 
        rgba(0, 0, 0, 0.4), 
        rgba(0, 0, 0, 0.2)
    );
    box-shadow: var(--glow-gold);
}

.bloodline-icon {
    width: 40px;
    height: 40px;
    margin-bottom: var(--spacing-sm);
    transition: all var(--transition-medium);
}

.bloodline-option:hover .bloodline-icon {
    transform: scale(1.1);
}

.bloodline-option span {
    font-family: var(--font-primary);
    font-weight: 600;
    font-size: var(--font-size-md);
    margin-bottom: var(--spacing-xs);
    z-index: 1;
}

.bloodline-desc {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    text-align: center;
    z-index: 1;
}

/* Gender Selection */
.gender-button-group {
    display: flex;
    justify-content: center;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.gender-btn {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: linear-gradient(145deg, 
        rgba(0, 0, 0, 0.3), 
        rgba(0, 0, 0, 0.1)
    );
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    color: var(--text-light);
    font-family: var(--font-primary);
    font-size: var(--font-size-md);
    cursor: pointer;
    transition: all var(--transition-medium);
    min-width: 120px;
}

.gender-btn:hover {
    transform: var(--hover-lift);
    border-color: var(--secondary-gold);
    background: var(--theme-hover-bg);
}

.gender-btn.active {
    background: linear-gradient(145deg, var(--primary-gold), var(--secondary-gold));
    color: var(--primary-dark);
    border-color: var(--primary-gold);
    box-shadow: var(--glow-gold);
}

.gender-btn i {
    margin-right: var(--spacing-xs);
}

/* Select Elements */
.styled-select-container {
    position: relative;
    width: 100%;
}

.styled-select-container select {
    appearance: none;
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    font-family: var(--font-secondary);
    font-size: var(--font-size-md);
    color: var(--text-light);
    background: linear-gradient(145deg, 
        rgba(0, 0, 0, 0.4), 
        rgba(0, 0, 0, 0.2)
    );
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all var(--transition-medium);
}

.styled-select-container select:focus {
    outline: none;
    border-color: var(--primary-gold);
    box-shadow: var(--glow-gold);
}

.styled-select-container select:hover {
    border-color: var(--border-color-hover);
}

.styled-select-arrow {
    position: absolute;
    right: var(--spacing-md);
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    color: var(--primary-gold);
    transition: all var(--transition-fast);
}



.bloodline-icon {
    width: 60px;
    height: 60px;
    margin-bottom: 1rem;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
    transition: all 0.3s ease;
    z-index: 1;
}

.bloodline-option:hover .bloodline-icon {
    transform: scale(1.1);
    filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
}

.bloodline-option span {
    font-family: 'Cinzel', serif;
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--primary-gold);
    margin-bottom: 0.5rem;
    text-align: center;
    z-index: 1;
}

.bloodline-desc {
    font-size: 0.9rem;
    color: var(--text-light);
    text-align: center;
    opacity: 0.8;
    z-index: 1;
}

/* Bloodline Icons */
.high-elf-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23c5b358' d='M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm0 448c110.5 0 200-89.5 200-200S366.5 56 256 56 56 145.5 56 256s89.5 200 200 200zm0-360c-88.2 0-160 71.8-160 160s71.8 160 160 160 160-71.8 160-160S344.2 96 256 96zm0 320c-88.2 0-160-71.8-160-160S167.8 96 256 96s160 71.8 160 160-71.8 160-160 160z'%3E%3C/path%3E%3C/svg%3E");
}

.wood-elf-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23a0d4b4' d='M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm0-96c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32 32-32zm416 96c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm0-96c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32 32-32zM256 192c61.9 0 112-50.1 112-112S317.9-32 256-32 144 18.1 144 80s50.1 112 112 112zm0-192c44.1 0 80 35.9 80 80s-35.9 80-80 80-80-35.9-80-80 35.9-80 80-80zm94.7 220.8c-16.9-13.8-38.7-21.5-62-21.5h-65.4c-23.3 0-45.1 7.7-62 21.5-17.5 14.3-28.5 34.4-31 56.8l-2.7 24.2c-2.6 23.2 13.1 44.5 36.3 47.1 1.6.2 3.2.3 4.8.3 21.3 0 39.7-16.1 42.3-37.5l2.7-24.2c.9-8.2 4.2-15.7 9.4-21.5 4.5-5.1 10.2-8.9 16.7-11.3-3.1 7.3-4.8 15.3-4.8 23.8 0 33.1 26.9 60 60 60s60-26.9 60-60c0-8.5-1.7-16.5-4.8-23.8 6.5 2.4 12.2 6.2 16.7 11.3 5.2 5.8 8.5 13.3 9.4 21.5l2.7 24.2c2.6 21.4 20.9 37.5 42.3 37.5 1.6 0 3.2-.1 4.8-.3 23.2-2.6 38.9-23.9 36.3-47.1l-2.7-24.2c-2.5-22.4-13.5-42.5-31-56.8zm-15.8 80.8l-2.7-24.2c-1.7-15.5-8.5-29.5-19.5-40.8-11.1-11.4-25.5-18.8-41.1-21.3-4.6-.8-9.2-1.2-13.8-1.2h-65.4c-4.6 0-9.2.4-13.8 1.2-15.7 2.5-30 9.9-41.1 21.3-11 11.3-17.8 25.3-19.5 40.8l-2.7 24.2c-.9 8-8 13.9-16 13-8-.9-13.9-8-13-16l2.7-24.2c2-17.5 10.3-33.5 23.2-45 13.5-11 30.6-17.1 48.3-17.1h65.4c17.7 0 34.8 6.1 48.3 17.1 12.9 11.5 21.2 27.5 23.2 45l2.7 24.2c.9 8-5 15.1-13 16-8 .9-15.1-5-16-13zm-111.9-45.6c-19.8 0-36 16.2-36 36s16.2 36 36 36 36-16.2 36-36-16.2-36-36-36z'%3E%3C/path%3E%3C/svg%3E");
}

.dark-elf-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23d4a0d4' d='M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z'%3E%3C/path%3E%3C/svg%3E");
}

.half-elf-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23c5b358' d='M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z'%3E%3C/path%3E%3C/svg%3E");
}

/* Theme-specific icon colors */
body[data-theme="high-elf"] .high-elf-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23a0c4e0' d='M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm0 448c110.5 0 200-89.5 200-200S366.5 56 256 56 56 145.5 56 256s89.5 200 200 200zm0-360c-88.2 0-160 71.8-160 160s71.8 160 160 160 160-71.8 160-160S344.2 96 256 96zm0 320c-88.2 0-160-71.8-160-160S167.8 96 256 96s160 71.8 160 160-71.8 160-160 160z'%3E%3C/path%3E%3C/svg%3E");
}

body[data-theme="wood-elf"] .wood-elf-icon {
    filter: brightness(1.2) saturate(1.2);
}

body[data-theme="dark-elf"] .dark-elf-icon {
    filter: brightness(1.2) saturate(1.2);
}

body[data-theme="half-elf"] .half-elf-icon {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%23e0c496' d='M464 256h-80v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8c-88.4 0-160 71.6-160 160v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zm-288 0H96v-64c0-35.3 28.7-64 64-64h8c13.3 0 24-10.7 24-24V56c0-13.3-10.7-24-24-24h-8C71.6 32 0 103.6 0 192v240c0 26.5 21.5 48 48 48h128c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z'%3E%3C/path%3E%3C/svg%3E");
}

/* ===== Gender Selection Styles ===== */
.gender-fieldset {
    margin: 2rem 0;
    padding: 1.5rem;
    border: 2px solid var(--border-color);
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.2);
}

.gender-fieldset legend {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--primary-gold);
    padding: 0 1rem;
}

.gender-button-group {
    display: flex;
    justify-content: center;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.gender-btn {
    padding: 0.8rem 1.5rem;
    font-family: 'Cinzel', serif;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-light);
    background-color: transparent;
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: all 0.3s ease;
}

.gender-btn:hover {
    background-color: var(--secondary-gold);
    color: var(--primary-dark);
    border-color: var(--primary-gold);
}

.gender-btn.active {
    background-color: var(--primary-gold);
    color: var(--primary-dark);
    border-color: var(--primary-gold);
    box-shadow: var(--glow-gold);
}

.gender-btn i {
    margin-right: var(--spacing-sm);
}

/* ===== Advanced Options Styles ===== */
.advanced-options-wrapper {
    margin-top: var(--spacing-lg);
}

.advanced-options {
    padding: var(--spacing-lg);
    border: 2px solid var(--border-color);
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.2);
    transition: all var(--transition-medium);
}

.advanced-options.expanded {
    border-color: var(--primary-gold);
    box-shadow: var(--glow-gold);
}

.advanced-options legend {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--primary-gold);
    padding: 0 1rem;
}

.toggle-advanced {
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    padding: var(--spacing-sm);
    border-radius: var(--border-radius);
    transition: all var(--transition-fast);
    user-select: none;
}

.toggle-advanced:hover {
    background: rgba(255, 255, 255, 0.1);
}

.toggle-advanced i {
    margin-left: var(--spacing-sm);
    transition: transform var(--transition-medium);
}

.advanced-options-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--border-color);
}

.option-group {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.option-group label {
    font-weight: 600;
    color: var(--secondary-gold);
    font-size: 1rem;
}

/* 改进下拉选择框样式 */
.styled-select {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    background: linear-gradient(145deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.2));
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    color: var(--text-light);
    font-family: 'Cinzel', serif;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-medium);
    backdrop-filter: blur(5px);
}

.styled-select:focus {
    outline: none;
    border-color: var(--primary-gold);
    box-shadow: var(--glow-gold);
    background: linear-gradient(145deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.3));
}

.styled-select:hover {
    border-color: var(--secondary-gold);
    transform: translateY(-1px);
}

.styled-select option {
    background: var(--secondary-dark);
    color: var(--text-light);
    padding: var(--spacing-sm);
}

/* 改进多选框样式 */
.multi-select-display {
    width: 100%;
    min-height: 45px;
    padding: var(--spacing-sm) var(--spacing-md);
    background: linear-gradient(145deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.2));
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius);
    color: var(--text-light);
    cursor: pointer;
    transition: all var(--transition-medium);
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 4px;
    backdrop-filter: blur(5px);
}

.multi-select-display:hover {
    border-color: var(--secondary-gold);
    transform: translateY(-1px);
}

.multi-select-container.open .multi-select-display {
    border-color: var(--primary-gold);
    box-shadow: var(--glow-gold);
    border-radius: var(--border-radius) var(--border-radius) 0 0;
}

.selected-tag {
    display: inline-flex;
    align-items: center;
    background: var(--primary-gold);
    color: var(--primary-dark);
    border-radius: 15px;
    padding: 4px 8px;
    font-size: 0.85rem;
    font-weight: 600;
    gap: 4px;
    animation: tagFadeIn 0.3s ease-out;
}

.remove-tag {
    cursor: pointer;
    font-size: 0.7rem;
    padding: 2px;
    border-radius: 50%;
    transition: all var(--transition-fast);
}

.remove-tag:hover {
    background: rgba(0, 0, 0, 0.2);
    transform: scale(1.2);
}

.multi-select-dropdown {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    background: var(--secondary-dark);
    border: 2px solid var(--primary-gold);
    border-top: none;
    border-radius: 0 0 var(--border-radius) var(--border-radius);
    z-index: 1000;
    max-height: 250px;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
    backdrop-filter: blur(10px);
}

.multi-select-dropdown label {
    display: block;
    padding: 8px 12px;
    cursor: pointer;
    transition: all var(--transition-fast);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.multi-select-dropdown label:hover {
    background: linear-gradient(90deg, var(--primary-gold), var(--secondary-gold));
    color: var(--primary-dark);
    transform: translateX(5px);
}

.multi-select-dropdown label:last-child {
    border-bottom: none;
}

/* 确保父容器在下拉菜单打开时不会裁剪内容 */
.option-group.overflow-visible {
    overflow: visible !important;
    z-index: 100;
    position: relative;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .advanced-options-content {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
    }
    
    .range-container {
        flex-direction: column;
        align-items: stretch;
        gap: var(--spacing-sm);
    }
    
    .range-value {
        align-self: center;
    }
}